# üéØ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã YouWow

## –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 02.01.2026

---

## üìå –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
1. **–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏:** `youwow.ru/song?partner=dnsshop`
2. **–î–∞—à–±–æ—Ä–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞:** `/partner/[id]` (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
3. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** `/admin/partners` (–ø–∞—Ä–æ–ª—å: `Kogortalove1!`)
4. **–ú–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ç—Ä–∏–±—É—Ü–∏—è:** –∫–æ–Ω–≤–µ—Ä—Å–∏—è –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–∞—Ä—Ç–Ω—ë—Ä—É, –¥–∞–∂–µ –µ—Å–ª–∏ –∫—É–ø–∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å
5. **–°—Ä–æ–∫ –∂–∏–∑–Ω–∏ cookie:** 30 –¥–Ω–µ–π
6. **–ö–æ–º–∏—Å—Å–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 200‚ÇΩ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞)
7. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:** mobile-first, –∫—Ä–∞—Å–∏–≤—ã–π UI/UX

### –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∏—á–∏ (–Ω–∞ –±—É–¥—É—â–µ–µ):
- Email/Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∑–∞–ª–æ–∂–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (CTR, –∫–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –¥–Ω—è–º, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫)

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Supabase)

### –¢–∞–±–ª–∏—Ü–∞: `partners`
```sql
CREATE TABLE partners (
  id TEXT PRIMARY KEY,              -- "dnsshop", "blogopodarki", "partner21"
  name TEXT NOT NULL,               -- "DNS Shop", "–ë–ª–æ–≥ –æ –ø–æ–¥–∞—Ä–∫–∞—Ö"
  website TEXT,                     -- "https://dnsshop.ru"
  payment_info TEXT,                -- "–ö–∞—Ä—Ç–∞: 5536 9137 XXXX XXXX, –ò–≤–∞–Ω –ò."
  commission_rate DECIMAL(10,2) DEFAULT 200.00,  -- –ö–æ–º–∏—Å—Å–∏—è –≤ —Ä—É–±–ª—è—Ö
  created_at TIMESTAMPTZ DEFAULT NOW(),
  notes TEXT,                       -- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞
  is_active BOOLEAN DEFAULT TRUE    -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_partners_created_at ON partners(created_at DESC);
```

### –¢–∞–±–ª–∏—Ü–∞: `partner_clicks`
```sql
CREATE TABLE partner_clicks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  partner_id TEXT NOT NULL REFERENCES partners(id) ON DELETE CASCADE,
  session_id UUID NOT NULL,         -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–µ—Å—Å–∏–∏ (–¥–ª—è —Å–≤—è–∑–∏ —Å –∫–æ–Ω–≤–µ—Ä—Å–∏–µ–π)
  clicked_at TIMESTAMPTZ DEFAULT NOW(),
  ip_address TEXT,                  -- –î–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
  user_agent TEXT,                  -- –ë—Ä–∞—É–∑–µ—Ä/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
  referrer TEXT,                    -- –û—Ç–∫—É–¥–∞ –ø—Ä–∏—à—ë–ª (Google, —Å–æ—Ü.—Å–µ—Ç–∏)
  landing_page TEXT NOT NULL,       -- "/song", "/", "/santa"
  utm_source TEXT,                  -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ UTM –º–µ—Ç–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  utm_medium TEXT,
  utm_campaign TEXT
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_clicks_partner_id ON partner_clicks(partner_id);
CREATE INDEX idx_clicks_clicked_at ON partner_clicks(clicked_at DESC);
CREATE INDEX idx_clicks_session_id ON partner_clicks(session_id);

-- RLS (Row Level Security)
ALTER TABLE partner_clicks ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –≤—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Å–≤–æ–∏ –∫–ª–∏–∫–∏, –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—Å—ë
CREATE POLICY "Allow public read" ON partner_clicks FOR SELECT USING (true);
CREATE POLICY "Allow insert" ON partner_clicks FOR INSERT WITH CHECK (true);
```

### –¢–∞–±–ª–∏—Ü–∞: `partner_conversions`
```sql
CREATE TABLE partner_conversions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  partner_id TEXT NOT NULL REFERENCES partners(id) ON DELETE CASCADE,
  session_id UUID NOT NULL,         -- –°–≤—è–∑—å —Å –∫–ª–∏–∫–æ–º
  order_id TEXT NOT NULL,           -- ID –∑–∞–∫–∞–∑–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
  service_type TEXT NOT NULL,       -- "song", "santa", –±—É–¥—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
  amount DECIMAL(10,2) NOT NULL,    -- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞ (590, 1390)
  commission DECIMAL(10,2) NOT NULL, -- –ö–æ–º–∏—Å—Å–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (200)
  converted_at TIMESTAMPTZ DEFAULT NOW(),
  landing_page TEXT,                -- –° –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏—à—ë–ª –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ
  is_paid_out BOOLEAN DEFAULT FALSE -- –í—ã–ø–ª–∞—á–µ–Ω–∞ –ª–∏ –∫–æ–º–∏—Å—Å–∏—è
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_conversions_partner_id ON partner_conversions(partner_id);
CREATE INDEX idx_conversions_converted_at ON partner_conversions(converted_at DESC);
CREATE INDEX idx_conversions_order_id ON partner_conversions(order_id);
CREATE INDEX idx_conversions_is_paid_out ON partner_conversions(is_paid_out);

-- RLS
ALTER TABLE partner_conversions ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow public read" ON partner_conversions FOR SELECT USING (true);
CREATE POLICY "Allow insert" ON partner_conversions FOR INSERT WITH CHECK (true);
```

### –¢–∞–±–ª–∏—Ü–∞: `partner_payouts`
```sql
CREATE TABLE partner_payouts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  partner_id TEXT NOT NULL REFERENCES partners(id) ON DELETE CASCADE,
  amount DECIMAL(10,2) NOT NULL,    -- –°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã
  conversions_count INTEGER NOT NULL, -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
  period_start DATE NOT NULL,       -- –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞
  period_end DATE NOT NULL,         -- –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞
  paid_at TIMESTAMPTZ DEFAULT NOW(),
  payment_method TEXT,              -- "–ö–∞—Ä—Ç–∞", "–°–ë–ü", "–ÆMoney"
  notes TEXT,                       -- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –≤—ã–ø–ª–∞—Ç–µ
  conversion_ids UUID[]             -- –ú–∞—Å—Å–∏–≤ ID –∫–æ–Ω–≤–µ—Ä—Å–∏–π –≤ —ç—Ç–æ–π –≤—ã–ø–ª–∞—Ç–µ
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_payouts_partner_id ON partner_payouts(partner_id);
CREATE INDEX idx_payouts_paid_at ON partner_payouts(paid_at DESC);

-- RLS
ALTER TABLE partner_payouts ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow public read" ON partner_payouts FOR SELECT USING (true);
```

---

## üîÑ –§–ª–æ—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 1. –ü–∞—Ä—Ç–Ω—ë—Ä —Ä–∞–∑–º–µ—â–∞–µ—Ç —Å—Å—ã–ª–∫—É
```
https://youwow.ru/song?partner=dnsshop
```

### 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç ‚Üí Middleware –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–§–∞–π–ª:** `middleware.ts`

```typescript
// 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä ?partner=xxx
// 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º session_id (UUID)
// 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ cookies (30 –¥–Ω–µ–π):
//    - partnerId: "dnsshop"
//    - sessionId: "uuid-v4"
//    - clickedAt: "2026-01-02T12:00:00Z"
//    - landingPage: "/song"
// 4. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∫–ª–∏–∫ –≤ partner_clicks
// 5. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ü–µ–ª–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ë–ï–ó –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ?partner
```

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑

**–°–µ—Ä–≤–∏—Å –ø–æ–∫—É–ø–∫–∏ –ø–µ—Å–Ω–∏:**
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É
- –û–ø–ª–∞—á–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞
- –ü–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### 4. –§–∏–∫—Å–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

**–§–∞–π–ª:** `api/song/process` (–∏–ª–∏ –≥–¥–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è)

```typescript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
const partnerData = getPartnerCookie(); // —á–∏—Ç–∞–µ–º cookie

if (partnerData?.partnerId && partnerData?.sessionId) {
  await supabase.from('partner_conversions').insert({
    partner_id: partnerData.partnerId,
    session_id: partnerData.sessionId,
    order_id: order.id,
    service_type: 'song',
    amount: 590,
    commission: partner.commission_rate, // –∏–∑ –ë–î
    landing_page: partnerData.landingPage,
  });

  // ‚úÖ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞!
  // (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É
}
```

### 5. –ü–∞—Ä—Ç–Ω—ë—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**URL:** `youwow.ru/partner/dnsshop`

–í–∏–¥–∏—Ç:
- –ü–µ—Ä–µ—Ö–æ–¥—ã: 142
- –ü–æ–∫—É–ø–∫–∏: 12 (8.5% –∫–æ–Ω–≤–µ—Ä—Å–∏—è)
- –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: 2,400‚ÇΩ
- –í—ã–ø–ª–∞—á–µ–Ω–æ: 1,200‚ÇΩ
- –ö –≤—ã–ø–ª–∞—Ç–µ: 1,200‚ÇΩ

---

## üé® –î–∏–∑–∞–π–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –î–∞—à–±–æ—Ä–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞: `/partner/[id]`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **Header** - –ª–æ–≥–æ—Ç–∏–ø YouWow, –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
2. **Affiliate Link Card** - —Å—Å—ã–ª–∫–∞ —Å –∫–Ω–æ–ø–∫–æ–π "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"
3. **KPI Cards** - –ø–µ—Ä–µ—Ö–æ–¥—ã, –ø–æ–∫—É–ø–∫–∏, –∑–∞—Ä–∞–±–æ—Ç–æ–∫ (3 –∫–∞—Ä—Ç–æ—á–∫–∏)
4. **Financials Section** - –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ, –≤—ã–ø–ª–∞—á–µ–Ω–æ, –∫ –≤—ã–ø–ª–∞—Ç–µ
5. **Chart** - –≥—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π (Recharts LineChart)
6. **Recent Conversions Table** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∫–æ–Ω–≤–µ—Ä—Å–∏–π

**–ú–∞–∫–µ—Ç (–º–æ–±–∏–ª—å–Ω—ã–π-first):**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ YouWow | dnsshop         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîó –í–∞—à–∞ —Å—Å—ã–ª–∫–∞:         ‚îÇ
‚îÇ youwow.ru/song?p=dns... ‚îÇ
‚îÇ [üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å]         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üë• –ü–µ—Ä–µ—Ö–æ–¥—ã             ‚îÇ
‚îÇ    142                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üí∞ –ü–æ–∫—É–ø–∫–∏              ‚îÇ
‚îÇ    12 (8.5%)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üíµ –ó–∞—Ä–∞–±–æ—Ç–æ–∫            ‚îÇ
‚îÇ    2,400‚ÇΩ               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üíº –§–∏–Ω–∞–Ω—Å—ã              ‚îÇ
‚îÇ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: 2,400‚ÇΩ      ‚îÇ
‚îÇ –í—ã–ø–ª–∞—á–µ–Ω–æ: 1,200‚ÇΩ       ‚îÇ
‚îÇ –ö –≤—ã–ø–ª–∞—Ç–µ: 1,200‚ÇΩ       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞           ‚îÇ
‚îÇ [–ì—Ä–∞—Ñ–∏–∫]                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏    ‚îÇ
‚îÇ ‚Ä¢ 02.01 –ü–µ—Å–Ω—è - 200‚ÇΩ   ‚îÇ
‚îÇ ‚Ä¢ 01.01 –°–∞–Ω—Ç–∞ - 200‚ÇΩ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Desktop (> 768px):**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ YouWow | –ü–∞—Ä—Ç–Ω—ë—Ä: dnsshop              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîó youwow.ru/song?partner=dnsshop [üìã] ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ü–µ—Ä–µ—Ö–æ–¥—ã‚îÇ –ü–æ–∫—É–ø–∫–∏ ‚îÇ –ó–∞—Ä–∞–±–æ—Ç–æ–∫ ‚îÇ –§–∏–Ω.   ‚îÇ
‚îÇ   142   ‚îÇ 12 (8%) ‚îÇ  2,400‚ÇΩ  ‚îÇ [‚öôÔ∏è]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìà –ì—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π        ‚îÇ
‚îÇ [LineChart —Å –¥–≤—É–º—è –ª–∏–Ω–∏—è–º–∏]            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏  | üí∞ –§–∏–Ω–∞–Ω—Å—ã   ‚îÇ
‚îÇ 02.01 –ü–µ—Å–Ω—è - 200‚ÇΩ     | –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ:  ‚îÇ
‚îÇ 01.01 –°–∞–Ω—Ç–∞ - 200‚ÇΩ     | 2,400‚ÇΩ       ‚îÇ
‚îÇ ...                    | –í—ã–ø–ª–∞—á–µ–Ω–æ:   ‚îÇ
‚îÇ                        | 1,200‚ÇΩ       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `/admin/partners`

**–ó–∞—â–∏—Ç–∞:**
```typescript
// –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–∞—Ä–æ–ª–µ–º
// –ü–∞—Ä–æ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ sessionStorage
// –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º sessionStorage
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **Auth Modal** - —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è
2. **Partners Sidebar** - —Å–ø–∏—Å–æ–∫ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
3. **Main Dashboard** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
4. **Tabs:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –§–∏–Ω–∞–Ω—Å—ã | –ù–∞—Å—Ç—Ä–æ–π–∫–∏
5. **Create Partner Modal** - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞
6. **Payout Modal** - —Ñ–æ—Ä–º–∞ –æ—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–ª–∞—Ç—ã

**–ú–∞–∫–µ—Ç (Desktop):**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–∞—Ä—Ç–Ω—ë—Ä—ã ‚îÇ dnsshop - DNS Shop           ‚îÇ
‚îÇ          ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + –°–æ–∑–¥–∞—Ç—å‚îÇ [–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞] [–§–∏–Ω–∞–Ω—Å—ã] [‚öôÔ∏è] ‚îÇ
‚îÇ          ‚îÇ                              ‚îÇ
‚îÇ ‚úÖ dnsshop‚îÇ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞                ‚îÇ
‚îÇ   142/12 ‚îÇ [–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–º—É]    ‚îÇ
‚îÇ          ‚îÇ                              ‚îÇ
‚îÇ blogopodarki‚îÇ üí∞ –§–∏–Ω–∞–Ω—Å—ã (hidden)       ‚îÇ
‚îÇ   89/7   ‚îÇ –†–µ–∫–≤–∏–∑–∏—Ç—ã: 5536 9137...      ‚îÇ
‚îÇ          ‚îÇ –ö–æ–º–∏—Å—Å–∏—è: 200‚ÇΩ –∑–∞ –ø—Ä–æ–¥–∞–∂—É    ‚îÇ
‚îÇ gift-ideas‚îÇ [–û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É]           ‚îÇ
‚îÇ   256/23 ‚îÇ –¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç:              ‚îÇ
‚îÇ          ‚îÇ 15.12 - 1,200‚ÇΩ (6 –∫–æ–Ω–≤.)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install recharts date-fns js-cookie @types/js-cookie uuid
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:
```
app/
  admin/
    partners/
      page.tsx              # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
      components/
        AuthModal.tsx
        PartnersList.tsx
        PartnerStats.tsx
        CreatePartnerModal.tsx
        PayoutModal.tsx
  partner/
    [id]/
      page.tsx              # –î–∞—à–±–æ—Ä–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  api/
    partners/
      create/route.ts       # POST —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
      [id]/
        stats/route.ts      # GET —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
        clicks/route.ts     # GET –∫–ª–∏–∫–∏
        conversions/route.ts # GET –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    affiliate/
      track-click/route.ts  # POST –∑–∞–ø–∏—Å—å –∫–ª–∏–∫–∞
      track-conversion/route.ts # POST –∑–∞–ø–∏—Å—å –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

components/
  affiliate/
    KPICard.tsx             # –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –º–µ—Ç—Ä–∏–∫–æ–π
    AffiliateChart.tsx      # –ì—Ä–∞—Ñ–∏–∫ (Recharts)
    ConversionsTable.tsx    # –¢–∞–±–ª–∏—Ü–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
    FinancialsSummary.tsx   # –°–≤–æ–¥–∫–∞ –ø–æ —Ñ–∏–Ω–∞–Ω—Å–∞–º

lib/
  affiliate/
    tracking.ts             # –†–∞–±–æ—Ç–∞ —Å cookies –ø–∞—Ä—Ç–Ω—ë—Ä–∞
    supabase-queries.ts     # –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î

middleware.ts               # –û–±—Ä–∞–±–æ—Ç–∫–∞ ?partner=xxx

types/
  affiliate.ts              # TypeScript —Ç–∏–ø—ã
```

---

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î (30 –º–∏–Ω)
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å TypeScript —Ç–∏–ø—ã –≤ `types/affiliate.ts`
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: —Å–æ–∑–¥–∞—Ç—å 2-3 –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤—Ä—É—á–Ω—É—é

**–§–∞–π–ª—ã:**
- `types/affiliate.ts`

---

### ‚úÖ –≠—Ç–∞–ø 2: –¢—Ä–µ–∫–∏–Ω–≥ –∫–ª–∏–∫–æ–≤ (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/affiliate/tracking.ts`:
  - `setPartnerCookie(partnerId, landingPage)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ cookie
  - `getPartnerCookie()` - —á—Ç–µ–Ω–∏–µ cookie
  - `clearPartnerCookie()` - –æ—á–∏—Å—Ç–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Middleware –æ–±—Ä–∞–±–æ—Ç–∫–∞ `?partner=xxx`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è session_id
  - –ó–∞–ø–∏—Å—å –∫–ª–∏–∫–∞ –≤ –ë–î
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ cookie
  - –†–µ–¥–∏—Ä–µ–∫—Ç –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- [ ] API endpoint `api/affiliate/track-click/route.ts`
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –∫–ª–∏–∫–Ω—É—Ç—å —Å—Å—ã–ª–∫—É ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å cookie ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î

**–§–∞–π–ª—ã:**
- `middleware.ts`
- `lib/affiliate/tracking.ts`
- `app/api/affiliate/track-click/route.ts`

---

### ‚úÖ –≠—Ç–∞–ø 3: –¢—Ä–µ–∫–∏–Ω–≥ –∫–æ–Ω–≤–µ—Ä—Å–∏–π (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] API endpoint `api/affiliate/track-conversion/route.ts`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Å–Ω–∏:
  - –ù–∞–π—Ç–∏ —Ñ–∞–π–ª –≥–¥–µ –ø–µ—Å–Ω—è —É—Å–ø–µ—à–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
  - –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `trackConversion(orderId, serviceType, amount)`
- [ ] –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ (–ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –ë–î –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –∫—É–ø–∏—Ç—å –ø–µ—Å–Ω—é ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î

**–§–∞–π–ª—ã:**
- `app/api/affiliate/track-conversion/route.ts`
- `app/api/song/process/route.ts` (–∏–ª–∏ –≥–¥–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- `lib/affiliate/tracking.ts` (–¥–æ–±–∞–≤–∏—Ç—å trackConversion)

---

### ‚úÖ –≠—Ç–∞–ø 4: –î–∞—à–±–æ—Ä–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ - Backend (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] API endpoints:
  - `GET /api/partners/[id]/stats` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `GET /api/partners/[id]/clicks` - —Å–ø–∏—Å–æ–∫ –∫–ª–∏–∫–æ–≤
  - `GET /api/partners/[id]/conversions` - —Å–ø–∏—Å–æ–∫ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
  - `GET /api/partners/[id]/chart-data` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
- [ ] Supabase –∑–∞–ø—Ä–æ—Å—ã –≤ `lib/affiliate/supabase-queries.ts`:
  - `getPartnerStats(partnerId)` - KPI
  - `getPartnerClicks(partnerId, limit, offset)` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è
  - `getPartnerConversions(partnerId, limit, offset)`
  - `getPartnerChartData(partnerId, days)` - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –¥–Ω—è–º

**–§–∞–π–ª—ã:**
- `app/api/partners/[id]/stats/route.ts`
- `app/api/partners/[id]/clicks/route.ts`
- `app/api/partners/[id]/conversions/route.ts`
- `lib/affiliate/supabase-queries.ts`

---

### ‚úÖ –≠—Ç–∞–ø 5: –î–∞—à–±–æ—Ä–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ - Frontend (2 —á–∞—Å–∞)
**–ó–∞–¥–∞—á–∏:**
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
  - `KPICard.tsx` - –∫–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Ç—Ä–∏–∫–∏ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è)
  - `AffiliateChart.tsx` - –≥—Ä–∞—Ñ–∏–∫ Recharts
  - `ConversionsTable.tsx` - —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–Ω–≤–µ—Ä—Å–∏–π
  - `FinancialsSummary.tsx` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/partner/[id]/page.tsx`:
  - Layout —Å Header
  - –°—Å—ã–ª–∫–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ + –∫–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  - 3 KPI –∫–∞—Ä—Ç–æ—á–∫–∏
  - –ì—Ä–∞—Ñ–∏–∫
  - –¢–∞–±–ª–∏—Ü–∞
  - –§–∏–Ω–∞–Ω—Å—ã
- [ ] –ê–¥–∞–ø—Ç–∏–≤: mobile-first, breakpoints (md: 768px, lg: 1024px)
- [ ] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –±—É—Ñ–µ—Ä (toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)

**–§–∞–π–ª—ã:**
- `app/partner/[id]/page.tsx`
- `components/affiliate/KPICard.tsx`
- `components/affiliate/AffiliateChart.tsx`
- `components/affiliate/ConversionsTable.tsx`
- `components/affiliate/FinancialsSummary.tsx`

**–î–∏–∑–∞–π–Ω:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Card, Button, Table)
- –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π (primary), —Ä–æ–∑–æ–≤—ã–π (accent)
- –ò–∫–æ–Ω–∫–∏: Lucide React

---

### ‚úÖ –≠—Ç–∞–ø 6: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Backend (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] API endpoints:
  - `POST /api/partners/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - `PATCH /api/partners/[id]` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - `DELETE /api/partners/[id]` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - `GET /api/partners/list` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
  - `POST /api/partners/[id]/payout` - –æ—Ç–º–µ—Ç–∫–∞ –≤—ã–ø–ª–∞—Ç—ã
- [ ] Supabase –∑–∞–ø—Ä–æ—Å—ã:
  - `createPartner(data)` - –≤—Å—Ç–∞–≤–∫–∞
  - `updatePartner(id, data)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - `getAllPartners()` - —Å–ø–∏—Å–æ–∫
  - `createPayout(partnerId, data)` - –≤—ã–ø–ª–∞—Ç–∞
  - `markConversionsAsPaid(conversionIds)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

**–§–∞–π–ª—ã:**
- `app/api/partners/create/route.ts`
- `app/api/partners/[id]/route.ts`
- `app/api/partners/list/route.ts`
- `app/api/partners/[id]/payout/route.ts`

---

### ‚úÖ –≠—Ç–∞–ø 7: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Frontend (2.5 —á–∞—Å–∞)
**–ó–∞–¥–∞—á–∏:**
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
  - `AuthModal.tsx` - –∑–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–º
  - `PartnersList.tsx` - sidebar —Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏
  - `PartnerStats.tsx` - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞
  - `CreatePartnerModal.tsx` - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  - `PayoutModal.tsx` - —Ñ–æ—Ä–º–∞ –≤—ã–ø–ª–∞—Ç—ã
  - `PartnerSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/partners/page.tsx`:
  - Auth –ø—Ä–æ–≤–µ—Ä–∫–∞ (sessionStorage)
  - Layout: sidebar + main content
  - Tabs: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –§–∏–Ω–∞–Ω—Å—ã | –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è ID –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å)
  - –û—Ç–º–µ—Ç–∫–∞ –≤—ã–ø–ª–∞—Ç—ã (–≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞, –∞–≤—Ç–æ–ø–æ–¥—Å—á—ë—Ç —Å—É–º–º—ã)
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)

**–§–∞–π–ª—ã:**
- `app/admin/partners/page.tsx`
- `app/admin/partners/components/AuthModal.tsx`
- `app/admin/partners/components/PartnersList.tsx`
- `app/admin/partners/components/CreatePartnerModal.tsx`
- `app/admin/partners/components/PayoutModal.tsx`

**–õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```typescript
// –ü—Ä–∏ –≤—Ö–æ–¥–µ:
const password = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å");
if (password === process.env.NEXT_PUBLIC_ADMIN_PASSWORD) {
  sessionStorage.setItem('admin_auth', 'true');
}

// –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ:
if (sessionStorage.getItem('admin_auth') !== 'true') {
  // –ü–æ–∫–∞–∑–∞—Ç—å AuthModal
}
```

---

### ‚úÖ –≠—Ç–∞–ø 8: –§–∏–Ω–∞–Ω—Å—ã –∏ –≤—ã–ø–ª–∞—Ç—ã (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PayoutHistory.tsx` - —Ç–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç
- [ ] –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞:
  - –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ = SUM(conversions.commission WHERE is_paid_out = false)
  - –í—ã–ø–ª–∞—á–µ–Ω–æ = SUM(payouts.amount)
  - –ö –≤—ã–ø–ª–∞—Ç–µ = –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ - –í—ã–ø–ª–∞—á–µ–Ω–æ
- [ ] –ü—Ä–∏ –æ—Ç–º–µ—Ç–∫–µ –≤—ã–ø–ª–∞—Ç—ã:
  - –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `partner_payouts`
  - –û–±–Ω–æ–≤–∏—Ç—å `is_paid_out = true` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Å–∏–π –≤ –ø–µ—Ä–∏–æ–¥–µ
  - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- [ ] –§–∏–ª—å—Ç—Ä –∫–æ–Ω–≤–µ—Ä—Å–∏–π –ø–æ —Å—Ç–∞—Ç—É—Å—É –æ–ø–ª–∞—Ç—ã –≤ –∞–¥–º–∏–Ω–∫–µ

**–§–∞–π–ª—ã:**
- `components/affiliate/PayoutHistory.tsx`
- `app/admin/partners/components/PayoutModal.tsx`

---

### ‚úÖ –≠—Ç–∞–ø 9: –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (1.5 —á–∞—Å–∞)
**–ó–∞–¥–∞—á–∏:**
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Recharts:
  ```bash
  npm install recharts
  ```
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AffiliateChart.tsx`:
  - LineChart —Å –¥–≤—É–º—è –ª–∏–Ω–∏—è–º–∏ (–∫–ª–∏–∫–∏, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏)
  - –û—Å—å X: –¥–∞—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π)
  - –û—Å—å Y: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  - Tooltip —Å –¥–µ—Ç–∞–ª—è–º–∏
  - Responsive –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- [ ] API endpoint –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–∞:
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–Ω—è–º
  - SQL: `GROUP BY DATE(clicked_at)` –¥–ª—è –∫–ª–∏–∫–æ–≤
  - SQL: `GROUP BY DATE(converted_at)` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–µ—Ä–∏–æ–¥—É (7/30/90 –¥–Ω–µ–π)

**–§–∞–π–ª—ã:**
- `components/affiliate/AffiliateChart.tsx`
- `app/api/partners/[id]/chart-data/route.ts`

---

### ‚úÖ –≠—Ç–∞–ø 10: UI/UX –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (375px, 414px)
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–∞—Ö (768px)
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ (1920px)
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏:
  - Framer Motion –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
  - Transition –¥–ª—è hover —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] Loading states:
  - Skeleton –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  - Spinner –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] Error states:
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
  - Fallback UI
- [ ] Empty states:
  - "–ù–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–π" - –∫—Ä–∞—Å–∏–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞
  - "–ü–∞—Ä—Ç–Ω—ë—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω" - 404
- [ ] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:
  - –í–∏–∑—É–∞–ª—å–Ω—ã–π feedback (toast)
  - –ò–∫–æ–Ω–∫–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ‚úì

**–§–∞–π–ª—ã:**
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π)

---

### ‚úÖ –≠—Ç–∞–ø 11: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ E2E (1 —á–∞—Å)
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
- [ ] –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π —Å—Å—ã–ª–∫–µ
- [ ] –ö—É–ø–∏—Ç—å –ø–µ—Å–Ω—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –∞–¥–º–∏–Ω–∫–µ
- [ ] –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ç—Ä–∏–±—É—Ü–∏–∏:
  - –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ /song
  - –ö—É–ø–∏—Ç—å /santa
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –∑–∞—Å—á–∏—Ç–∞–ª–∞—Å—å

**–ß–µ–∫–ª–∏—Å—Ç:**
- [ ] Cookie —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ 30 –¥–Ω–µ–π
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ì—Ä–∞—Ñ–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ê–¥–∞–ø—Ç–∏–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### ‚úÖ –≠—Ç–∞–ø 12: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —à—Ç—Ä–∏—Ö–∏ (30 –º–∏–Ω)
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å README –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤:
  - –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É
  - –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
  - –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤—ã–ø–ª–∞—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ –∞–¥–º–∏–Ω–∫—É:
  - –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - –ö–∞–∫ –æ—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É
- [ ] –û–±–Ω–æ–≤–∏—Ç—å robots.txt:
  ```
  Disallow: /admin/
  Disallow: /partner/
  ```
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞-—Ç–µ–≥–∏ noindex –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] –ö–æ–º–º–∏—Ç –∏ –¥–µ–ø–ª–æ–π

**–§–∞–π–ª—ã:**
- `docs/affiliate-partner-guide.md`
- `docs/affiliate-admin-guide.md`
- `public/robots.txt`

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π

### –î–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞:
- [x] –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ `?partner=id`
- [x] –î–∞—à–±–æ—Ä–¥ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ `/partner/[id]`
- [x] KPI: –ø–µ—Ä–µ—Ö–æ–¥—ã, –ø–æ–∫—É–ø–∫–∏, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, –∑–∞—Ä–∞–±–æ—Ç–æ–∫
- [x] –ì—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- [x] –¢–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- [x] –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ (–∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ, –≤—ã–ø–ª–∞—á–µ–Ω–æ, –∫ –≤—ã–ø–ª–∞—Ç–µ)
- [x] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- [x] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –±—É—Ñ–µ—Ä

### –î–ª—è –∞–¥–º–∏–Ω–∞:
- [x] –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–º
- [x] –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–∞—Ä—Ç–Ω—ë—Ä—É
- [x] –û—Ç–º–µ—Ç–∫–∞ –≤—ã–ø–ª–∞—Ç
- [x] –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–ª–∞—Ç
- [x] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- [x] –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- [x] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

### –¢—Ä–µ–∫–∏–Ω–≥:
- [x] Cookie –Ω–∞ 30 –¥–Ω–µ–π
- [x] –ú–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ç—Ä–∏–±—É—Ü–∏—è
- [x] –ó–∞–ø–∏—Å—å –∫–ª–∏–∫–æ–≤
- [x] –ó–∞–ø–∏—Å—å –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- [x] –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–ª–∏–∫–æ–≤ (–ø–æ IP)

---

## üìû –ö–∞–∫ –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É

–ö–æ–≥–¥–∞ –≤–µ—Ä–Ω—ë—Ç–µ—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç:

```
–ü—Ä–∏–≤–µ—Ç! –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π.
–ü—Ä–æ—á–∏—Ç–∞–π –ø–ª–∞–Ω –∏–∑ —Ñ–∞–π–ª–∞ .claude/affiliate-system-plan.md
–∏ —Å–∫–∞–∂–∏ —Å –∫–∞–∫–æ–≥–æ —ç—Ç–∞–ø–∞ –Ω–∞—á–Ω—ë–º.
```

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

### –ó–∞–ª–æ–∂–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ):
1. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å email/telegram
2. **–ê–≤—Ç–æ–≤—ã–ø–ª–∞—Ç—ã:** —Ñ–ª–∞–≥ `is_paid_out` –ø–æ–∑–≤–æ–ª–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ API
3. **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:** –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã
4. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏:** –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `parent_partner_id` –¥–ª—è MLM
5. **–ü—Ä–æ–º–æ–∫–æ–¥—ã:** –º–æ–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å `promo_code` —Å `partner_id`
6. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `landing_variant` –≤ –∫–ª–∏–∫–∏

---

## ‚ú® –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - RLS –≤ Supabase –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
   - –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∫–∏ –≤ env –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3. **UX:**
   - Loading states –≤–µ–∑–¥–µ
   - Optimistic UI –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ tooltips

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç 100+ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
   - API –≥–æ—Ç–æ–≤ –∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
   - –ë–î –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏–Ω–¥–µ–∫—Å–∞–º–∏

---

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** ~12-14 —á–∞—Å–æ–≤ —á–∏—Å—Ç–æ–π —Ä–∞–±–æ—Ç—ã
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (—Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫ –¥–µ—Ç–∞–ª—è–º)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π (–∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è —Ä–æ—Å—Ç–∞ –±–∏–∑–Ω–µ—Å–∞)

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 02.01.2026, 03:30
