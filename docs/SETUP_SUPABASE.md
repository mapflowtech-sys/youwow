# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

## –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### 1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Supabase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com
2. –ù–∞–∂–º–∏—Ç–µ "New Project"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name**: YouWow (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
   - **Database Password**: –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, Frankfurt –¥–ª—è –†–æ—Å—Å–∏–∏)
4. –ù–∞–∂–º–∏—Ç–µ "Create new project" –∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ ~2 –º–∏–Ω—É—Ç—ã

### 2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Settings** (‚öôÔ∏è)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **API**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   - **Project URL** - —ç—Ç–æ –±—É–¥–µ—Ç `NEXT_PUBLIC_SUPABASE_URL`
   - **anon public** key - —ç—Ç–æ –±—É–¥–µ—Ç `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - **service_role** key (–Ω–∞–∂–º–∏—Ç–µ "Reveal" —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å) - —ç—Ç–æ –±—É–¥–µ—Ç `SUPABASE_SERVICE_ROLE_KEY`

### 3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env.local

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ –∫–ª—é—á–∏:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# AI Services (–∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∑–∂–µ)
EDEN_AI_API_KEY=
ELEVENLABS_API_KEY=
SYNCLABS_API_KEY=
SUNO_API_KEY=
REPLICATE_API_KEY=

# Payments (–∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∑–∂–µ)
YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=

# Email (–∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∑–∂–µ)
RESEND_API_KEY=

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –§–∞–π–ª `.env.local` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` –∏ –ù–ï –±—É–¥–µ—Ç –ø–æ–ø–∞–¥–∞—Ç—å –≤ git!

### 4. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

1. –í Supabase Dashboard –æ—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor** (–∑–Ω–∞—á–æ–∫ üîç –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é)
2. –ù–∞–∂–º–∏—Ç–µ **New Query**
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `supabase/schema.sql` –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–í–°–Å** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
5. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
6. –ù–∞–∂–º–∏—Ç–µ **Run** (–∏–ª–∏ Ctrl+Enter)

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "Success. No rows returned"

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Table Editor** (–∑–Ω–∞—á–æ–∫ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é)
2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 3 —Ç–∞–±–ª–∏—Ü—ã:
   - `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - `orders` - –∑–∞–∫–∞–∑—ã
   - `service_options` - –æ–ø—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `service_options` - —Ç–∞–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~10 –∑–∞–ø–∏—Å–µ–π —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### 6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Row Level Security (RLS) - –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Supabase –≤–∫–ª—é—á–∞–µ—Ç RLS –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å:

1. –í Table Editor –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É RLS
3. –û—Ç–∫–ª—é—á–∏—Ç–µ "Enable RLS"

‚ö†Ô∏è **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞** –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞!

### 7. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-db.ts` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```typescript
import { supabase } from './lib/supabase';

async function testConnection() {
  const { data, error } = await supabase
    .from('service_options')
    .select('*')
    .limit(5);

  if (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', error);
  } else {
    console.log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ó–∞–ø–∏—Å–µ–π:', data.length);
    console.log(data);
  }
}

testConnection();
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
npx tsx test-db.ts
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!" - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase –≤—ã –º–æ–∂–µ—Ç–µ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Eden AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å YooKassa –¥–ª—è –ø—Ä–∏—ë–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Resend –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email

## Troubleshooting

### –û—à–∏–±–∫–∞ "Missing Supabase environment variables"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª `.env.local` —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `NEXT_PUBLIC_` –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ SQL
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `schema.sql`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ

### –¢–∞–±–ª–∏—Ü—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SQL –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
